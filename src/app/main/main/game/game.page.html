<ion-content>
    <ion-grid class="header-nav">
        <ion-row class=" blue-bg">
            <div class="user-container">
                <div class="img-container">
                    <img src="assets/dummy-user.jpg" alt="" width="55" style="border-radius: 50%;  vertical-align: middle;" />
                    <span class="pl-10 username-css" *ngIf="user">{{user?.user_name}}</span>
                </div>
                <div class="box">
                    <img style="z-index: 1" src="assets/currency-logo.svg" alt="" />
                    <div class="currency-bg">
                        <div class="content-center font-700 f-12">
                            <span>{{user?.puzzle_pieces ? user?.puzzle_pieces : 0 }}</span>
                        </div>
                    </div>
                    <div class="plus-bg ml--10" [routerLink]="['/main/store']">
                        <img width="15" src="assets/plus.svg" alt="" />
                    </div>
                </div>
            </div>
        </ion-row>

        <ion-row class="mt-10">
            <div class="lvl-card-container">
                <div class="lvl-circle">
                    <span>lvl {{user?.level_id}}</span>
                </div>

                <!-- align-self: center; width: {{progressPercent}}%; -->
                <div class="lvl-loader">
                    <div class="loader" style="align-self: center;" [style.width]="progressPercent"></div>
                </div>

                <div style="margin-left: auto" class="lvl-circle-y">
                    <span>lvl {{user?.level_id+1}}</span>
                </div>
            </div>
        </ion-row>

        <ion-row>
            <ion-col>
                <ion-button *ngIf="lastGameCheck" class="continue-cus-btn" (click)="onLastGameEvent()">
                   Continue Game
               </ion-button>
           </ion-col>
            <ion-col size="12">
                <div class="card">
                    <div class="card-header move">Your Move</div>
                    <div class="card-body">
                        <div *ngIf="gameList === null || gameList.length === 0" class="no-record">
                            NO GAME FOUND
                        </div>
                        <ng-container *ngFor="let user of gameList">
                            <div class="top-box mt-10" *ngFor="let game of user?.games">
                                <div class="loader" *ngIf="!game.id"></div>
                                <img *ngIf="game.id" class="ml-10" src="assets/dummy-user.jpg" alt="" width="55" style="border-radius: 50%" />
                                <span *ngIf="game.id" class="ml-2">{{user?.user_name}}</span>

                                <div *ngIf="game.id" class="btn-end">
                                    <ion-button (click)="onPlayGame(game)" class="cus-btn">Play</ion-button>
                                </div>
                            </div>
                            
                        </ng-container>
                        
                    </div>
                </div>
            </ion-col>
            
        </ion-row>

        <ion-row>
            <ion-col size="12">
                <div class="card">
                    <div class="card-header reward">Rewards</div>
                    <div class="card-body">
                        <div class="body-header">
                            <button *ngIf="claimList[0]?.claim_reward?.length" (click)="claimAllReward()" class="cus-btn">Claim All</button>
                        </div>
                        <div *ngIf="claimList === null || claimList.length === 0" class="no-record">
                            NO REWARDS AVAILABLE
                        </div>
                        <ng-container *ngFor="let claim of claimList; index as i">
                            <ng-container *ngFor="let claim_reward of claim.claim_reward">

                                <div class="top-box mt-10">
                                    <img class="ml-10" src="assets/dummy-user.jpg" alt="" width="55" style="border-radius: 50%" />
                                    <span class="ml-2" *ngIf="(claim.user_id == user.id) && (claim_reward.reward_id== 3)">{{claim.player.user_name}}
                                        cracked your code</span>

                                    <span class="ml-2" *ngIf="(claim.player_id == user.id) && (claim_reward.reward_id == 2)">You cracked
                                        {{claim.user.user_name}} Code</span>

                                    <span class="ml-2" *ngIf="(claim.user_id == user.id) &&  (claim_reward.reward_id== 2)">You cracked
                                        {{claim.player.user_name}}</span>

                                    <span class="ml-2" *ngIf="(claim.player_id == user.id) && (claim_reward.reward_id == 3)">{{claim.user.user_name}}
                                        Cracked your code
                                    </span>
                                    <div class="btn-end">
                                        <ion-button (click)="onRewardUpdate(claim_reward, i)" class="cus-btn">Claim
                                        </ion-button>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-container>
                    </div>

                </div>
            </ion-col>
        </ion-row>

        <ion-row>
            <ion-col size="12">
                <div class="card">
                    <div class="card-header givereward">Give Rewards</div>
                    <div class="card-body">
                        <div class="body-header">
                            <button *ngIf="claimList[0]?.give_reward?.length" (click)="giveRewardToAll()" class="cus-btn">Give All</button>
                        </div>
                        <div *ngIf="claimList === null || claimList.length === 0" class="no-record">
                            NO REWARDS AVAILABLE
                        </div>
                        <ng-container *ngFor="let claim of claimList; index as i">
                            <ng-container *ngFor="let give_reward of claim.give_reward">

                                <div class="top-box mt-10">
                                    <img class="ml-10" src="assets/dummy-user.jpg" alt="" width="55" style="border-radius: 50%" />

                                    <span class="ml-2" *ngIf="(claim.player_id == user.id) && (give_reward.reward_id== 4 )">Give Reward to
                                        {{claim.user.user_name}}</span>


                                    <span class="ml-2" *ngIf="(claim.user_id == user.id) && (give_reward.reward_id== 4 )">Give Reward to {{claim.player.user_name}}</span>
                                    <div class="btn-end">
                                        <ion-button (click)="onRewardUpdate(give_reward, i)" class="cus-btn">Claim</ion-button>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-container>
                    </div>
                </div>
            </ion-col>
        </ion-row>
        <ion-row>
            <div style="width: 100%; height: 100px;"></div>
        </ion-row>
    </ion-grid>
    <ion-button class="play-cus-btn" (click)="onNewGameEvent()">
        New Game
    </ion-button>
    <!-- <ion-button *ngIf="lastGameCheck" class="play-cus-btn" (click)="onLastGameEvent()">
        Continue Game
    </ion-button> -->
    <!-- <ion-fab class="play-cus-btn" vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="onNewGameEvent()">New Game
        </ion-fab-button>
    </ion-fab> -->
</ion-content>

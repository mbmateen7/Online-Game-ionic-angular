(self.webpackChunkpic_playce=self.webpackChunkpic_playce||[]).push([[580],{580:(e,t,n)=>{"use strict";n.r(t),n.d(t,{StorePageModule:()=>v});var i=n(8583),s=n(665),o=n(7823),c=n(8977),r=n(639),a=n(8259),p=n.n(a),g=n(421),l=n(4981);let u=(()=>{class e{constructor(e,t,n,i,s){this.route=e,this.restService=t,this.userService=n,this.navCtrl=i,this.router=s,this.messageEvent=new r.vpe,this.filterData=null}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user"))}getOwnedItemList(){this.restService.getRequest("shop/purchase-detail").subscribe(e=>{this.ownedItemsList=e.message,localStorage.setItem("ownedItemsList",JSON.stringify(this.ownedItemsList))})}onBuyPrimaryFilter(){var e,t;this.user.puzzle_pieces>3e3?(null===(e=this.getFilterData)||void 0===e?void 0:e.shop_id)&&(null===(t=this.getFilterData)||void 0===t?void 0:t.id)?(this.restService.postRequestToken("shop/purchase",{shop_id:this.getFilterData.shop_id,filter_id:this.getFilterData.id}).subscribe(e=>{e.status&&(this.getOwnedItemList(),p().fire({title:"Success",text:"You have successfully purchased the filter"}))}),this.user.puzzle_pieces=this.user.puzzle_pieces-3e3,this.userService.updateUser(this.user),localStorage.setItem("user",JSON.stringify(this.user)),this.navCtrl.navigateBack("filter")):this.navCtrl.navigateForward("main/store/filter/filter-list"):p().fire({title:"Error",text:"You Donot have enough puzzle pieces. want to buy?"}).then(e=>{e.isConfirmed&&this.messageEvent.emit(!0)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(c.gz),r.Y36(g.v),r.Y36(l.K),r.Y36(o.SH),r.Y36(c.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-filter"]],inputs:{getFilterData:"getFilterData"},outputs:{messageEvent:"messageEvent"},decls:10,vars:0,consts:[[1,"main-container"],[1,"list","mt-10",3,"click"],["src","assets/icon/filter-icon.svg"],[1,"pl-5","filter-text"],[1,"cus-btn"],["width","15","src","assets/currency-log-w.svg","alt",""],[1,"wh-text"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.NdJ("click",function(){return t.onBuyPrimaryFilter()}),r.TgZ(2,"div"),r._UZ(3,"img",2),r.TgZ(4,"span",3),r._uU(5,"Primary Filter"),r.qZA(),r.qZA(),r.TgZ(6,"div",4),r._UZ(7,"img",5),r.TgZ(8,"span",6),r._uU(9,"3000"),r.qZA(),r.qZA(),r.qZA(),r.qZA())},styles:[".main-container[_ngcontent-%COMP%]{width:95%;margin:auto}.main-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.main-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle}.filter-text[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-family:Poppins}.filter-text[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:15px;line-height:22px;letter-spacing:.03em;color:#000}.cus-btn[_ngcontent-%COMP%]{width:90px;height:28px;background:#9dcaec;border-radius:30px;text-align:center}.cus-btn[_ngcontent-%COMP%]   .wh-text[_ngcontent-%COMP%]{font-family:Poppins;font-size:12px;line-height:25px;letter-spacing:.03em;color:#fff;padding-left:5px}.pl-5[_ngcontent-%COMP%]{padding-left:5px}.mt-10[_ngcontent-%COMP%]{margin-top:10px}"]}),e})();function d(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",2),r.TgZ(1,"div",3),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().onBuyBundle(t)}),r.TgZ(2,"div"),r._UZ(3,"img",4),r.TgZ(4,"span",5),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"div",6),r._UZ(7,"img",7),r.TgZ(8,"span",8),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(5),r.Oqu(e.name),r.xp6(4),r.Oqu(e.price)}}let f=(()=>{class e{constructor(e,t){this.restService=e,this.userService=t,this.messageEvent=new r.vpe,this.shopList=[]}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),this.restService.getRequest("shop/get-bundle-list").subscribe(e=>{console.log(e.data),this.shopList=e.data})}onBuyBundle(e){this.user.puzzle_pieces>e.price?(this.restService.postRequestToken("shop/purchase",{shop_id:e.id}).subscribe(e=>{e.status&&(this.getOwnedItemList(),p().fire({title:"Success",text:"You have successfully purchased",timer:2e3}))}),this.user.puzzle_pieces=this.user.puzzle_pieces-e.price,this.userService.updateUser(this.user),localStorage.setItem("user",JSON.stringify(this.user))):p().fire({title:"Error",text:"You Donot have enough puzzle pieces. want to buy?"}).then(e=>{e.isConfirmed&&this.messageEvent.emit(!0)})}getOwnedItemList(){this.restService.getRequest("shop/purchase-detail").subscribe(e=>{this.ownedItemsList=e.message,localStorage.setItem("ownedItemsList",JSON.stringify(this.ownedItemsList))})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(g.v),r.Y36(l.K))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-item"]],inputs:{getFilterData:"getFilterData"},outputs:{messageEvent:"messageEvent"},decls:2,vars:1,consts:[[1,"main-container"],["class","mt-10",4,"ngFor","ngForOf"],[1,"mt-10"],[1,"list",3,"click"],["src","assets/icon/filter-icon.svg"],[1,"pl-5","filter-text"],[1,"cus-btn"],["width","15","src","assets/currency-log-w.svg","alt",""],[1,"wh-text"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,d,10,2,"div",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",t.shopList))},directives:[i.sg],styles:[".main-container[_ngcontent-%COMP%]{width:95%;margin:auto}.main-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.main-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle}.filter-text[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-family:Poppins}.filter-text[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:15px;line-height:22px;letter-spacing:.03em;color:#000}.cus-btn[_ngcontent-%COMP%]{width:90px;height:28px;background:#9dcaec;border-radius:30px;text-align:center}.cus-btn[_ngcontent-%COMP%]   .wh-text[_ngcontent-%COMP%]{font-family:Poppins;font-size:12px;line-height:25px;letter-spacing:.03em;color:#fff;padding-left:5px}.pl-5[_ngcontent-%COMP%]{padding-left:5px}.mt-10[_ngcontent-%COMP%]{margin-top:10px}"]}),e})();var h=n(3532);function m(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",2),r.TgZ(1,"div",3),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw().onBuyBundle(t.name)}),r.TgZ(2,"div"),r._UZ(3,"img",4),r.TgZ(4,"span",5),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"div",6),r._UZ(7,"img",7),r.TgZ(8,"span",8),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(5),r.Oqu(e.name),r.xp6(4),r.Oqu(e.price)}}let x=(()=>{class e{constructor(e,t,n,i){this.restService=e,this.platform=t,this.store=n,this.ref=i,this.data=[{name:"100 PuzzlePieces",image1:"bundleshop.png",image2:"buy099.png",selector:"bundles",price:"$0.99"},{name:"550 PuzzlePieces",image1:"bundleshop.png",image2:"buy499.png",selector:"bundles",price:"$4.99"},{name:"1,200 PuzzlePieces",image1:"bundleshop.png",image2:"buy999.png",selector:"bundles",price:"$9.99"},{name:"2,600 PuzzlePieces",image1:"bundleshop.png",image2:"buy1999.png",selector:"bundles",price:"$19.99"},{name:"7,000 PuzzlePieces",image1:"bundleshop.png",image2:"buy4999.png",selector:"bundles",price:"$49.99"},{name:"15,000 PuzzlePieces",image1:"bundleshop.png",image2:"buy9999.png",selector:"bundles",price:"$99.99"}],this.platform.ready().then(()=>{this.store.verbosity=this.store.DEBUG,this.registerProducts(),this.setupListeners()})}ngOnInit(){}registerProducts(){let e=["com.picplayce.game.100pp","com.picplayce.game.550pp","com.picplayce.game.1200pp","com.picplayce.game.2600pp","com.picplayce.game.7000pp","com.picplayce.game.15000pp"];for(let t=0;t<e.length;t++)this.store.register({id:e[t],type:this.store.CONSUMABLE});this.store.refresh()}setupListeners(){this.store.when("product").approved(e=>(this.ref.detectChanges(),e.verify())).verified(e=>e.finish())}onBuyBundle(e){let t,n=["com.picplayce.game.100pp","com.picplayce.game.550pp","com.picplayce.game.1200pp","com.picplayce.game.2600pp","com.picplayce.game.7000pp","com.picplayce.game.15000pp"],i=["100 PuzzlePieces","550 PuzzlePieces","1,200 PuzzlePieces","2,600 PuzzlePieces","7,000 PuzzlePieces","15,000 PuzzlePieces"];for(let s=0;s<6;s++)if(e==i[s]){t=n[s],console.log("tried to buy this",e,i[s],t);break}this.buyItems(t)}buyItems(e){this.store.order(e).then(t=>{console.log("THis is response of product purchase",t),e=(e=(e=e.split("com.picplayce.game.").pop()).split("."))[0].split("pp"),e=parseInt(e[0]),this.purchaseItem("",e,"currency")}).catch(e=>{console.log("Error while purchase",e),alert("Please try again")})}purchaseItem(e,t,n){console.log("Item Name",t)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(g.v),r.Y36(o.t4),r.Y36(h.g),r.Y36(r.sBO))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-bundle"]],decls:2,vars:1,consts:[[1,"main-container"],["class","mt-10",4,"ngFor","ngForOf"],[1,"mt-10"],[1,"list",3,"click"],["src","assets/icon/filter-icon.svg"],[1,"pl-5","filter-text"],[1,"cus-btn"],["width","15","src","assets/currency-log-w.svg","alt",""],[1,"wh-text"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,m,10,2,"div",1),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngForOf",t.data))},directives:[i.sg],styles:[".main-container[_ngcontent-%COMP%]{width:95%;margin:auto}.main-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.main-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle}.filter-text[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-family:Poppins}.filter-text[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:15px;line-height:22px;color:#000}.cus-btn[_ngcontent-%COMP%]{width:90px;height:28px;background:#9dcaec;border-radius:30px;text-align:center}.cus-btn[_ngcontent-%COMP%]   .wh-text[_ngcontent-%COMP%]{font-family:Poppins;font-size:12px;line-height:25px;letter-spacing:.03em;color:#fff;padding-left:5px}.pl-5[_ngcontent-%COMP%]{padding-left:5px}.mt-10[_ngcontent-%COMP%]{margin-top:10px}"]}),e})();function O(e,t){1&e&&r._UZ(0,"ion-back-button",25)}function P(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-filter",26),r.NdJ("messageEvent",function(t){return r.CHM(e),r.oxw().receiveMessage(t)}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("getFilterData",e.filterData)}}function _(e,t){1&e&&r._UZ(0,"app-item")}function b(e,t){1&e&&r._UZ(0,"app-bundle")}const y=[{path:"",component:(()=>{class e{constructor(e,t){this.route=e,this.userService=t,this.isFilterOpened=!0,this.isItemOpened=!1,this.isBundleOpened=!1,this.filterPage=!1,this.userService.userData.subscribe(e=>{console.log(e),this.user=JSON.parse(e)})}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user"))}ionViewWillEnter(){this.filterData=JSON.parse(this.route.snapshot.queryParamMap.get("filterData")),console.log("FilterData",this.filterData),this.filterPage=!!this.filterData.id}changeTab(e){"f"===e&&(this.isFilterOpened=!0,this.isItemOpened=!1,this.isBundleOpened=!1),"i"===e&&(this.isFilterOpened=!1,this.isItemOpened=!0,this.isBundleOpened=!1),"b"===e&&(this.isFilterOpened=!1,this.isItemOpened=!1,this.isBundleOpened=!0)}receiveMessage(e){console.log("Eventt",e),this.isFilterOpened=!1,this.isItemOpened=!1,this.isBundleOpened=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(c.gz),r.Y36(l.K))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-store"]],viewQuery:function(e,t){if(1&e&&r.Gf(u,5),2&e){let e;r.iGM(e=r.CRH())&&(t.child=e.first)}},decls:44,vars:5,consts:[[1,"top"],[1,"top-box"],["offset","1","size","3"],[1,"box"],["defaultHref","filter","icon","chevron-back-outline",4,"ngIf"],["src","assets/dummy-user.jpg","alt","","width","55",2,"border-radius","50%","margin-left","5px"],["size","8"],[1,"username-css"],["src","assets/currency-logo.svg","alt","",1,"pl-5",2,"z-index","1"],[1,"currency-bg"],[1,"content-center","font-700","f-12"],[1,"plus-bg","ml--10"],["width","15","src","assets/plus.svg","alt",""],["size","12",1,"store-bg"],[1,"store-body"],[1,"logo-bg"],["width","38","src","assets/currency-logo-b.svg","alt",""],[1,"cus-btn"],[1,"mt-25"],[1,"card"],[1,"card-header"],[3,"click"],[1,"card-body","mt-2"],[3,"getFilterData","messageEvent",4,"ngIf"],[4,"ngIf"],["defaultHref","filter","icon","chevron-back-outline"],[3,"getFilterData","messageEvent"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-grid"),r.TgZ(1,"ion-row",0),r.TgZ(2,"div",1),r.TgZ(3,"ion-col",2),r.TgZ(4,"div",3),r.YNc(5,O,1,0,"ion-back-button",4),r._UZ(6,"img",5),r.qZA(),r.qZA(),r.TgZ(7,"ion-col",6),r.TgZ(8,"div",3),r.TgZ(9,"span",7),r._uU(10,"STORE"),r.qZA(),r._UZ(11,"img",8),r.TgZ(12,"div",9),r.TgZ(13,"div",10),r.TgZ(14,"span"),r._uU(15),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",11),r._UZ(17,"img",12),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"ion-row"),r.TgZ(19,"ion-col",13),r.TgZ(20,"div",14),r.TgZ(21,"p"),r._uU(22,"Claim daily puzzle pieces!"),r.qZA(),r.TgZ(23,"div",15),r._UZ(24,"img",16),r._UZ(25,"img",16),r._UZ(26,"img",16),r._UZ(27,"img",16),r._UZ(28,"img",16),r.qZA(),r.TgZ(29,"ion-button",17),r._uU(30,"CLAIM"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(31,"ion-row",18),r.TgZ(32,"div",19),r.TgZ(33,"div",20),r.TgZ(34,"span",21),r.NdJ("click",function(){return t.changeTab("f")}),r._uU(35,"Filters"),r.qZA(),r.TgZ(36,"span",21),r.NdJ("click",function(){return t.changeTab("b")}),r._uU(37,"Bundles"),r.qZA(),r.TgZ(38,"span",21),r.NdJ("click",function(){return t.changeTab("i")}),r._uU(39,"item"),r.qZA(),r.qZA(),r.TgZ(40,"div",22),r.YNc(41,P,1,1,"app-filter",23),r.YNc(42,_,1,0,"app-item",24),r.YNc(43,b,1,0,"app-bundle",24),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(5),r.Q6J("ngIf",t.filterPage),r.xp6(10),r.Oqu(t.user.puzzle_pieces),r.xp6(26),r.Q6J("ngIf",t.isFilterOpened),r.xp6(1),r.Q6J("ngIf",t.isItemOpened),r.xp6(1),r.Q6J("ngIf",t.isBundleOpened))},directives:[o.jY,o.Nd,o.wI,i.O5,o.YG,o.oU,o.cs,u,f,x],styles:["p[_ngcontent-%COMP%]{font-family:Poppins}ion-grid[_ngcontent-%COMP%]{padding:0!important;overflow-y:auto}.top[_ngcontent-%COMP%]{width:100vw;height:107px;background:linear-gradient(180deg,#6976b9,#6976b9c2);box-shadow:0 5px 10px #49494940}.top-box[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.currency-bg[_ngcontent-%COMP%]{width:89px;height:26px;background:#fff;box-shadow:inset 0 0 6px #a7a7a7;z-index:0;margin-left:-15px}.box[_ngcontent-%COMP%]{display:flex;align-items:center}.pl-10[_ngcontent-%COMP%]{padding-left:10px}.pl-5[_ngcontent-%COMP%]{padding-left:5px}.username-css[_ngcontent-%COMP%]{letter-spacing:.03em;color:#fff;font-weight:600;font-size:15px;line-height:22px;font-family:Poppins}.home-currency[_ngcontent-%COMP%]{display:flex;align-content:center}.content-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100%}span[_ngcontent-%COMP%]{font-family:Poppins}.font-700[_ngcontent-%COMP%]{font-weight:700}.f-12[_ngcontent-%COMP%]{font-size:12px}.plus-bg[_ngcontent-%COMP%]{width:30px;height:30px;background:#99c43c;z-index:1;display:flex;justify-content:center}.ml--10[_ngcontent-%COMP%]{margin-left:-10px}.mt-15[_ngcontent-%COMP%]{margin-top:15px}.mt-25[_ngcontent-%COMP%]{margin-top:25px}.lvl-circle[_ngcontent-%COMP%]{background:#373b63;border-radius:50px;border:5px solid #c8cbe7}.lvl-circle[_ngcontent-%COMP%], .lvl-circle-y[_ngcontent-%COMP%]{width:70px;height:70px;display:flex;justify-content:center;align-items:center}.lvl-circle-y[_ngcontent-%COMP%]{background:#f7d049;border-radius:50px;border:5px solid #feefb9}.lvl-circle-y[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .lvl-circle[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-family:Poppins;color:#fff;font-weight:700;font-size:18px;line-height:27px}.mt-2[_ngcontent-%COMP%]{margin-top:2px}.ml-2[_ngcontent-%COMP%]{margin-left:2px}.mt-10[_ngcontent-%COMP%]{margin-top:10px}.ml-10[_ngcontent-%COMP%]{margin-left:10px}.ml-8[_ngcontent-%COMP%]{margin-left:8px}.btn-end[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:end;margin-right:10px}.cus-btn[_ngcontent-%COMP%]{--background:#99c43c;border-radius:30px;width:87px;height:28px;font-size:14px;letter-spacing:.03em}.play-cus-btn[_ngcontent-%COMP%]{display:flex;justify-content:center}.play-cus-btn[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{margin-top:-35px;--background:linear-gradient(85.81deg,#99c43c 13.89%,#c5e67e 95.94%);box-sizing:border-box;--border-radius:90px;width:218px;height:53px;font-family:Poppins;font-weight:700;font-size:16px}.store-bg[_ngcontent-%COMP%]{background-image:url(store-bg.f12f0093185cf4d758f7.svg);background-repeat:no-repeat;height:155px;background-size:cover;background-position:50%}.store-bg[_ngcontent-%COMP%]   .store-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;justify-content:space-around;margin:auto;width:calc(100% - 50px)}.store-bg[_ngcontent-%COMP%]   .store-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins;font-style:normal;font-weight:500;font-size:18px;line-height:27px;margin:0;letter-spacing:.03em;color:#fff}.store-bg[_ngcontent-%COMP%]   .store-body[_ngcontent-%COMP%]   .logo-bg[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.card[_ngcontent-%COMP%]{width:calc(100% - 50px);margin:auto;min-height:491px;background:#fff;box-shadow:0 4px 10px #82828240;border-radius:20px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding-top:25px;display:flex;justify-content:space-around;font-weight:700;font-size:18px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{color:#f29d93}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-child(2){color:#f5aa40;color:#876baf}ion-back-button[_ngcontent-%COMP%]{position:fixed;left:-12px;color:#fff;--icon-font-size:35px}"]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[i.ez,s.u5,o.Pc,C]]}),e})()}}]);
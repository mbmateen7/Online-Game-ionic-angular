(self.webpackChunkpic_playce=self.webpackChunkpic_playce||[]).push([[4183],{4183:(e,o,n)=>{"use strict";n.r(o),n.d(o,{LoginPageModule:()=>M});var t=n(8583),i=n(665),s=n(7823),r=n(8977),c=n(4762),l=n(8748),a=n(8259),g=n.n(a),p=n(639);let u=(()=>{class e{constructor(){}ngOnInit(){g().fire({title:'<div><img src="assets/icon/lost.png" style="width: 20vw; height:20vw;"><br><h5>Error!</h5></div>',text:"User name or Password is wrong",confirmButtonText:"OK",confirmButtonColor:"#99C43C",allowOutsideClick:!0})}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-dialog"]],decls:2,vars:0,template:function(e,o){1&e&&(p.TgZ(0,"p"),p._uU(1," dialog works!\n"),p.qZA())},styles:[""]}),e})();var d=n(1841),f=n(421),h=n(4981),m=n(9342),Z=n(5901);function C(e,o){1&e&&(p.TgZ(0,"p",28),p._uU(1," Email is required "),p.qZA())}function _(e,o){1&e&&(p.TgZ(0,"p",28),p._uU(1," Email is incorrect "),p.qZA())}function w(e,o){if(1&e){const e=p.EpF();p.TgZ(0,"ion-icon",29),p.NdJ("click",function(){return p.CHM(e),p.oxw().passwordSeenStatus()}),p.qZA()}}function b(e,o){if(1&e){const e=p.EpF();p.TgZ(0,"ion-icon",30),p.NdJ("click",function(){return p.CHM(e),p.oxw().passwordSeenStatus()}),p.qZA()}}function v(e,o){1&e&&p._UZ(0,"div",31)}function x(e,o){if(1&e){const e=p.EpF();p.TgZ(0,"ion-chip",32),p.TgZ(1,"ion-label",33),p.NdJ("click",function(){return p.CHM(e),p.oxw().submitLoginForm()}),p._uU(2," LOG IN "),p.qZA(),p.qZA()}if(2&e){const e=p.oxw();p.Q6J("ngClass",e.profileForm.valid?"cus-chip":"cus-chip-dis")}}const O=function(){return["/home"]},T=function(){return["/reset"]},P=[{path:"",component:(()=>{class e{constructor(e,o,n,t,i,s,r,c,l){this.http=e,this.fb=o,this.restService=n,this.router=t,this.loadingController=i,this.alertController=s,this.userService=r,this.googlePlus=c,this.fbb=l,this.alertMessage="please Wait...",this.passwordType="password",this.isSeen=!1,this.showSignUpLoader=!1,this.forgetPassword=!1}ngOnInit(){this.profileForm=this.fb.group({email:["",[i.kI.required,i.kI.email,i.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",[i.kI.required,i.kI.minLength(6)]]})}fblogin(){this.fbb.login(["public_profile","user_friends","email"]).then(e=>console.log("Logged into Facebook!",e)).catch(e=>console.log("Error logging into Facebook",e)),this.fbb.logEvent(this.fbb.EVENTS.EVENT_NAME_ADDED_TO_CART)}ionViewDidEnter(){this.forgetPassword=!1}submitLoginForm(){return(0,c.mG)(this,void 0,void 0,function*(){this.showSignUpLoader=!0;const e=yield this.userService.onUserLogin(this.profileForm.value);this.showSignUpLoader=!1,e.token&&(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.data[0])),this.setDeviceToken(),this.setLastLogin(),this.showSignUpLoader=!1,this.router.navigate(["/main"])),e.error&&g().fire({title:'<div><img src="assets/icon/lost.png" style="width: 20vw; height:20vw;"><br><h5>Error!</h5></div>',text:"User name or Password is wrong",confirmButtonText:"OK",confirmButtonColor:"#99C43C",allowOutsideClick:!0})})}get errorControl(){return this.profileForm.controls}passwordSeenStatus(){this.isSeen=!this.isSeen,this.passwordType=this.isSeen?"text":"password"}presentLoading(){return(0,c.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({cssClass:"my-custom-class",message:"Please wait...",duration:2e3});yield e.present()})}presentAlert(){return(0,c.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Alert",message:this.alertMessage,buttons:["OK"]});yield e.present();const{role:o}=yield e.onDidDismiss();console.log("onDidDismiss resolved with role",o)})}setLastLogin(){let e=new Date;this.restService.postRequestToken("users/set-last-login",{last_login:e}).subscribe(e=>{e.status&&console.log("Last login is set successfully")})}setDeviceToken(){l.V.requestPermissions().then(e=>{"granted"===e.receive&&l.V.register()}),l.V.addListener("registration",e=>{console.log("Firebase Token => ",e.value),this.restService.postRequestToken("users/set-device-token",{deviceToken:e}).subscribe(o=>{console.log("Token ---\x3e",e)})})}removeString(e){console.log(this.profileForm.value),this.profileForm.get("email").setValue(e.target.value.trim()),console.log(this.profileForm.value)}googleSignIn(){this.googlePlus.login({}).then(e=>{this.user=e,console.log(this.user);var o={user_name:this.user.givenName.replace(/\s/g,""),email:this.user.email,id:this.user.userId};this.onSignUp(JSON.stringify(o))}).catch(e=>{console.log(e),this.user=`Error ${JSON.stringify(e)}`})}onSignUp(e){this.restService.postRequest("users/register",e).subscribe(e=>{e.token&&(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.data)),this.setDeviceToken(),this.showSignUpLoader=!1,this.router.navigate(["main"]))},e=>{this.showSignUpLoader=!1,g().fire({title:"<div><h5>Error!</h5></div>",html:e.error,confirmButtonText:"Ok",confirmButtonColor:"#99C43C"})})}}return e.\u0275fac=function(o){return new(o||e)(p.Y36(d.eN),p.Y36(i.qu),p.Y36(f.v),p.Y36(r.F0),p.Y36(s.HT),p.Y36(s.Br),p.Y36(h.K),p.Y36(m.Q),p.Y36(Z.s))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-login"]],viewQuery:function(e,o){if(1&e&&p.Gf(u,5),2&e){let e;p.iGM(e=p.CRH())&&(o.child=e.first)}},decls:51,vars:12,consts:[[1,"blueBg"],[1,"text-center","mb-50"],["width","277","height","78","src","assets/logo.png","alt","",1,"mt-50","mb-10"],[1,"cus-card"],[3,"formGroup"],[1,"pl-20"],["size","large","name","close-outline",3,"routerLink"],[1,"mt-5"],["position","floating"],["name","mail","slot","start"],[3,"input"],["class","ml-20 danger",4,"ngIf"],["name","lock-closed"],["formControlName","password",3,"type"],["class","eye","name","eye-outline","slot","end",3,"click",4,"ngIf"],["class","eye","name","eye-off-outline","slot","end",3,"click",4,"ngIf"],[1,"mt-30"],[1,"text-center"],["class","loader1",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"ion-text-center"],[1,"form-group","form-check","text-center","ion-text-center"],[3,"routerLink"],[1,"separator"],[1,"line"],[1,"cus-chip-social",3,"click"],[1,"text-center","cus-label-social","social-chip-space"],["name","logo-google"],[1,"ml-20","danger"],["name","eye-outline","slot","end",1,"eye",3,"click"],["name","eye-off-outline","slot","end",1,"eye",3,"click"],[1,"loader1"],[3,"ngClass"],[1,"text-center","cus-label",3,"click"]],template:function(e,o){1&e&&(p.TgZ(0,"ion-content"),p.TgZ(1,"ion-grid"),p.TgZ(2,"ion-row",0),p.TgZ(3,"ion-col"),p.TgZ(4,"div",1),p._UZ(5,"img",2),p.qZA(),p.qZA(),p.qZA(),p.TgZ(6,"ion-grid",3),p.TgZ(7,"form",4),p.TgZ(8,"ion-row"),p.TgZ(9,"ion-col",5),p.TgZ(10,"div"),p._UZ(11,"ion-icon",6),p.qZA(),p.qZA(),p.qZA(),p.TgZ(12,"ion-row",7),p.TgZ(13,"ion-col"),p.TgZ(14,"ion-item"),p.TgZ(15,"ion-label",8),p._UZ(16,"ion-icon",9),p._uU(17," Email "),p.qZA(),p.TgZ(18,"ion-input",10),p.NdJ("input",function(e){return o.removeString(e)}),p.qZA(),p.qZA(),p.YNc(19,C,2,0,"p",11),p.YNc(20,_,2,0,"p",11),p.qZA(),p.qZA(),p.TgZ(21,"ion-row"),p.TgZ(22,"ion-col"),p.TgZ(23,"ion-item"),p.TgZ(24,"ion-label",8),p._UZ(25,"ion-icon",12),p._uU(26," Password "),p.qZA(),p._UZ(27,"ion-input",13),p.YNc(28,w,1,0,"ion-icon",14),p.YNc(29,b,1,0,"ion-icon",15),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(30,"ion-row",16),p.TgZ(31,"ion-col",17),p.YNc(32,v,1,0,"div",18),p.YNc(33,x,3,1,"ion-chip",19),p.qZA(),p.qZA(),p.TgZ(34,"div",20),p.TgZ(35,"div",21),p.TgZ(36,"a",22),p._uU(37,"Forgot Password?"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(38,"ion-row"),p.TgZ(39,"ion-col"),p.TgZ(40,"div",23),p._UZ(41,"div",24),p.TgZ(42,"p"),p._uU(43,"OR"),p.qZA(),p._UZ(44,"div",24),p.qZA(),p.qZA(),p.qZA(),p.TgZ(45,"ion-row"),p.TgZ(46,"ion-col",17),p.TgZ(47,"ion-chip",25),p.NdJ("click",function(){return o.googleSignIn()}),p.TgZ(48,"ion-label",26),p._UZ(49,"ion-icon",27),p._uU(50," CONTINUE WITH GOOGLE "),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(7),p.Q6J("formGroup",o.profileForm),p.xp6(4),p.Q6J("routerLink",p.DdM(10,O)),p.xp6(8),p.Q6J("ngIf",o.profileForm.touched&&(null==o.errorControl.email.errors?null:o.errorControl.email.errors.required)),p.xp6(1),p.Q6J("ngIf",o.profileForm.touched&&"INVALID"===o.errorControl.email.status),p.xp6(7),p.Q6J("type",o.passwordType),p.xp6(1),p.Q6J("ngIf",o.isSeen),p.xp6(1),p.Q6J("ngIf",!o.isSeen),p.xp6(3),p.Q6J("ngIf",o.showSignUpLoader),p.xp6(1),p.Q6J("ngIf",!o.showSignUpLoader),p.xp6(3),p.Q6J("routerLink",p.DdM(11,T)))},directives:[s.W2,s.jY,s.Nd,s.wI,i._Y,i.JL,i.sg,s.gu,s.YI,r.rH,s.Ie,s.Q$,s.pK,s.j9,t.O5,i.JJ,i.u,r.yS,s.hM,t.mk],styles:["p[_ngcontent-%COMP%]{font-family:Poppins}.danger[_ngcontent-%COMP%]{color:red}.blueBg[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]{background-color:#707bbd}[_nghost-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size:15px}.mt-50[_ngcontent-%COMP%]{margin-top:50px}.mt-25[_ngcontent-%COMP%]{margin-top:25px}.mb-50[_ngcontent-%COMP%]{margin-bottom:50px}.w-100[_ngcontent-%COMP%]{width:100%!important}.text-center[_ngcontent-%COMP%]{text-align:center}.cus-card[_ngcontent-%COMP%]{margin-top:-50px;position:relative;border-radius:50px;background-color:#fff}.mt-5[_ngcontent-%COMP%]{margin-top:5px}.pl-20[_ngcontent-%COMP%]{padding-left:20px}.cus-chip-dis[_ngcontent-%COMP%]{background:#d6eca6;pointer-events:none}.cus-chip[_ngcontent-%COMP%], .cus-chip-dis[_ngcontent-%COMP%]{border-radius:30px;width:330px;height:53px}.cus-chip[_ngcontent-%COMP%]{background:#abcd61}.cus-label[_ngcontent-%COMP%]{width:100%;color:#fff;font-family:Poppins;letter-spacing:.03em;font-weight:700;font-size:16px}.cus-chip-social[_ngcontent-%COMP%]{background:#fff;border-radius:30px;width:330px;height:53px;border:1px solid #dfdfdf}.cus-label-social[_ngcontent-%COMP%]{width:100%;color:#000;font-family:Poppins;letter-spacing:.03em;font-weight:700;font-size:16px}.separator[_ngcontent-%COMP%]{display:flex;align-items:center}.separator[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{height:2px;flex:1;background-color:#b6b6b6}.separator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0 2rem;color:#b6b6b6;font-family:Poppins}ion-item[_ngcontent-%COMP%] > ion-label[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-input[_ngcontent-%COMP%]{font-family:Poppins;font-size:14px}ion-item[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{font-size:14px}.eye[_ngcontent-%COMP%]{position:absolute;right:10px;top:30px;z-index:10000}ion-col[_ngcontent-%COMP%]{font-family:Poppins}.fs-12[_ngcontent-%COMP%]{font-size:12px}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.social-chip-space[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.ml-20[_ngcontent-%COMP%]{margin-left:20px}ion-grid[_ngcontent-%COMP%]{padding:0!important;overflow-y:auto;margin:0}"]}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[r.Bz.forChild(P)],r.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({providers:[m.Q],imports:[[t.ez,i.u5,s.Pc,k,i.UX]]}),e})()}}]);
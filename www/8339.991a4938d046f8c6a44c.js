(self.webpackChunkpic_playce=self.webpackChunkpic_playce||[]).push([[8339],{8339:(t,e,i)=>{"use strict";i.r(e),i.d(e,{FilterListPageModule:()=>I});var s=i(8583),n=i(665),o=i(7823),r=i(8977),c=i(8259),l=i.n(c),a=i(639),u=i(421),h=i(4981);function d(t,e){1&t&&a._UZ(0,"ion-icon",9)}function p(t,e){1&t&&a._UZ(0,"ion-icon",10)}function f(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-item"),a.TgZ(1,"ion-label",6),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().onBuyPrimaryFilter(e)}),a._uU(2),a.qZA(),a.YNc(3,d,1,0,"ion-icon",7),a.YNc(4,p,1,0,"ion-icon",8),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(2),a.Oqu(t.name),a.xp6(1),a.Q6J("ngIf",!t.isPurchased),a.xp6(1),a.Q6J("ngIf",t.isPurchased)}}const g=function(){return["/main/store"]},m=[{path:"",component:(()=>{class t{constructor(t,e,i){this.restService=t,this.userService=e,this.navCtrl=i,this.sortedFilterList=[]}ngOnInit(){}compare(t,e){return t.isPurchased>e.isPurchased?-1:t.isPurchased<e.isPurchased?1:0}ionViewDidEnter(){this.user=JSON.parse(localStorage.getItem("user")),this.filterList=JSON.parse(localStorage.getItem("filterList")),this.ownedItemsList=JSON.parse(localStorage.getItem("ownedItemsList"));let t=[];for(let e=0;e<this.ownedItemsList.length;e++)this.ownedItemsList[e].filter_id&&t.push(this.ownedItemsList[e].filter_id);for(let e=0;e<this.filterList.length;e++)t.includes(this.filterList[e].id)?(this.filterList[e].isPurchased=1,this.sortedFilterList.push(this.filterList[e])):(this.filterList[e].isPurchased=0,this.sortedFilterList.push(this.filterList[e]));this.sortedFilterList.sort(this.compare)}onBuyPrimaryFilter(t){t.isPurchased?l().fire({title:"Error",text:"You have already purchased the filter"}):(this.restService.postRequestToken("shop/purchase",{shop_id:t.shop_id,filter_id:t.id}).subscribe(t=>{t.status&&(this.getOwnedItemList(),l().fire({title:"Success",text:"You have successfully purchased the filter"}))}),this.user.puzzle_pieces=this.user.puzzle_pieces-3e3,this.userService.updateUser(this.user),localStorage.setItem("user",JSON.stringify(this.user)),this.navCtrl.navigateBack("/main/store"))}getOwnedItemList(){this.restService.getRequest("shop/purchase-detail").subscribe(t=>{this.ownedItemsList=t.message,localStorage.setItem("ownedItemsList",JSON.stringify(this.ownedItemsList))})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(u.v),a.Y36(h.K),a.Y36(o.SH))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-filter-list"]],decls:9,vars:3,consts:[[1,"top-container"],[1,"top-body"],[1,"icon",3,"routerLink"],["src","assets/icon/back-icon.svg"],[1,"text"],[4,"ngFor","ngForOf"],[3,"click"],["slot","end","name","lock-closed-outline",4,"ngIf"],["slot","end","name","lock-open-outline",4,"ngIf"],["slot","end","name","lock-closed-outline"],["slot","end","name","lock-open-outline"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-content"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a.TgZ(3,"div",2),a._UZ(4,"ion-icon",3),a.qZA(),a.TgZ(5,"div",4),a._uU(6,"Filter List"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ion-list"),a.YNc(8,f,5,3,"ion-item",5),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Q6J("routerLink",a.DdM(2,g)),a.xp6(5),a.Q6J("ngForOf",e.sortedFilterList))},directives:[o.W2,o.YI,r.rH,o.gu,o.q_,s.sg,o.Ie,o.Q$,s.O5],styles:[".top-container[_ngcontent-%COMP%]{display:flex;width:100%;min-height:107px;background:linear-gradient(180deg,#6976b9,#6976b9c2);box-shadow:0 5px 10px #49494940}.top-container[_ngcontent-%COMP%]   .top-body[_ngcontent-%COMP%]{width:90%;margin:auto;display:flex}.top-container[_ngcontent-%COMP%]   .top-body[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:auto}.text[_ngcontent-%COMP%]{font-family:Poppins;font-style:normal;font-weight:400;font-size:20px;line-height:30px;letter-spacing:.03em;color:#fff}"]}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.Bz.forChild(m)],r.Bz]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[s.ez,n.u5,o.Pc,L]]}),t})()}}]);
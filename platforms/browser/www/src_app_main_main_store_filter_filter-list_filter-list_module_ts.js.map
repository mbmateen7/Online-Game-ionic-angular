{"version":3,"sources":["./src/app/main/main/store/filter/filter-list/filter-list-routing.module.ts","./src/app/main/main/store/filter/filter-list/filter-list.module.ts","./src/app/main/main/store/filter/filter-list/filter-list.page.ts","./src/app/main/main/store/filter/filter-list/filter-list.page.scss","./src/app/main/main/store/filter/filter-list/filter-list.page.html"],"names":[],"mappings":"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","file":"src_app_main_main_store_filter_filter-list_filter-list_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { FilterListPage } from './filter-list.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FilterListPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class FilterListPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FilterListPageRoutingModule } from './filter-list-routing.module';\r\n\r\nimport { FilterListPage } from './filter-list.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    FilterListPageRoutingModule\r\n  ],\r\n  declarations: [FilterListPage]\r\n})\r\nexport class FilterListPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { NavController } from '@ionic/angular';\r\nimport { RestService } from 'src/app/service/rest.service';\r\nimport { UserService } from 'src/app/service/user.service';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-filter-list',\r\n  templateUrl: './filter-list.page.html',\r\n  styleUrls: ['./filter-list.page.scss'],\r\n})\r\nexport class FilterListPage implements OnInit {\r\n\r\n  filterList;\r\n  ownedItemsList;\r\n  sortedFilterList = [];\r\n  user;\r\n  constructor(private restService: RestService, private userService: UserService, private navCtrl: NavController) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n\r\n  compare(a, b) {\r\n    if (a.isPurchased > b.isPurchased) {\r\n      return -1;\r\n    }\r\n    if (a.isPurchased < b.isPurchased) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.user = JSON.parse(localStorage.getItem('user'));\r\n    this.filterList = JSON.parse(localStorage.getItem('filterList'));\r\n    this.ownedItemsList = JSON.parse(localStorage.getItem('ownedItemsList'))\r\n    let ownedFilterIds = [];\r\n    for (let i = 0; i < this.ownedItemsList.length; i++) {\r\n      if (this.ownedItemsList[i].filter_id) {\r\n        ownedFilterIds.push(this.ownedItemsList[i].filter_id)\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < this.filterList.length; i++) {\r\n      if (ownedFilterIds.includes(this.filterList[i].id)) {\r\n        this.filterList[i].isPurchased = 1;\r\n        this.sortedFilterList.push(this.filterList[i])\r\n      }\r\n      else {\r\n        this.filterList[i].isPurchased = 0;\r\n        this.sortedFilterList.push(this.filterList[i])\r\n\r\n      }\r\n    }\r\n    // console.log('this.sortedFilterList', this.sortedFilterList);\r\n    this.sortedFilterList.sort(this.compare);\r\n    // console.log('this.sortedFilterList', this.sortedFilterList);\r\n\r\n  }\r\n\r\n  onBuyPrimaryFilter(filter) {\r\n    if (filter.isPurchased) {\r\n      Swal.fire({\r\n        title: 'Error',\r\n        text: 'You have already purchased the filter'\r\n      })\r\n      return\r\n    }\r\n    let filterObj = {\r\n      shop_id: filter.shop_id,\r\n      filter_id: filter.id\r\n    }\r\n    this.restService.postRequestToken('shop/purchase', filterObj).subscribe((res: any) => {\r\n      if (res.status) {\r\n        this.getOwnedItemList();\r\n        let filterObj = {\r\n          shop_id: null,\r\n          filter_id: null\r\n        }\r\n        Swal.fire({\r\n          title: 'Success',\r\n          text: 'You have successfully purchased the filter'\r\n        })\r\n      }\r\n    })\r\n    this.user.puzzle_pieces = this.user.puzzle_pieces - 3000;\r\n    this.userService.updateUser(this.user);\r\n    localStorage.setItem('user', JSON.stringify(this.user));\r\n    this.navCtrl.navigateBack('/main/store');\r\n  }\r\n\r\n  getOwnedItemList() {\r\n    this.restService.getRequest('shop/purchase-detail').subscribe((res: any) => {\r\n      this.ownedItemsList = res.message;\r\n      localStorage.setItem('ownedItemsList', JSON.stringify(this.ownedItemsList))\r\n\r\n    });\r\n  }\r\n}\r\n","export default \".top-container {\\n  display: flex;\\n  width: 100%;\\n  min-height: 107px;\\n  background: linear-gradient(180deg, #6976B9 0%, rgba(105, 118, 185, 0.76) 100%);\\n  box-shadow: 0px 5px 10px rgba(73, 73, 73, 0.25);\\n}\\n.top-container .top-body {\\n  width: 90%;\\n  margin: auto;\\n  display: flex;\\n}\\n.top-container .top-body .text {\\n  margin: auto;\\n}\\n.text {\\n  font-family: Poppins;\\n  font-style: normal;\\n  font-weight: normal;\\n  font-size: 20px;\\n  line-height: 30px;\\n  letter-spacing: 0.03em;\\n  color: #FFFFFF;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbHRlci1saXN0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxXQUFBO0VBQ0EsaUJBQUE7RUFDQSwrRUFBQTtFQUNBLCtDQUFBO0FBQ0Y7QUFDRTtFQUNFLFVBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQUNKO0FBQ0k7RUFDRSxZQUFBO0FBQ047QUFJQTtFQUNFLG9CQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLHNCQUFBO0VBQ0EsY0FBQTtBQURGIiwiZmlsZSI6ImZpbHRlci1saXN0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50b3AtY29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIG1pbi1oZWlnaHQ6IDEwN3B4O1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxODBkZWcsICM2OTc2QjkgMCUsIHJnYmEoMTA1LCAxMTgsIDE4NSwgMC43NikgMTAwJSk7XHJcbiAgYm94LXNoYWRvdzogMHB4IDVweCAxMHB4IHJnYmEoNzMsIDczLCA3MywgMC4yNSk7XHJcblxyXG4gIC50b3AtYm9keSB7XHJcbiAgICB3aWR0aDogOTAlO1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuXHJcbiAgICAudGV4dCB7XHJcbiAgICAgIG1hcmdpbjogYXV0bztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi50ZXh0IHtcclxuICBmb250LWZhbWlseTogUG9wcGlucztcclxuICBmb250LXN0eWxlOiBub3JtYWw7XHJcbiAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcclxuICBmb250LXNpemU6IDIwcHg7XHJcbiAgbGluZS1oZWlnaHQ6IDMwcHg7XHJcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMDNlbTtcclxuICBjb2xvcjogI0ZGRkZGRjtcclxufVxyXG4iXX0= */\";","export default \"<ion-content>\\r\\n\\r\\n  <div class=\\\"top-container\\\">\\r\\n    <div class=\\\"top-body\\\">\\r\\n      <div [routerLink]=\\\"['/main/store']\\\" class=\\\"icon\\\">\\r\\n        <ion-icon src=\\\"assets/icon/back-icon.svg\\\"></ion-icon>\\r\\n      </div>\\r\\n      <div class=\\\"text\\\">Filter List</div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <ion-list>\\r\\n    <ion-item *ngFor=\\\"let filter of sortedFilterList\\\">\\r\\n      <ion-label (click)=\\\"onBuyPrimaryFilter(filter)\\\">{{filter.name}}</ion-label>\\r\\n      <ion-icon *ngIf=\\\"!filter.isPurchased\\\" slot=\\\"end\\\" name=\\\"lock-closed-outline\\\"></ion-icon>\\r\\n      <ion-icon *ngIf=\\\"filter.isPurchased\\\" slot=\\\"end\\\" name=\\\"lock-open-outline\\\"></ion-icon>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n</ion-content>\";"],"sourceRoot":"webpack:///"}